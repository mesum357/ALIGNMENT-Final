const modalTriggers=document.querySelectorAll(".modal-trigger"),closeBtns=document.querySelectorAll(".close-btn"),closeBtnsn=document.querySelectorAll(".close-btn_main"),modals=document.querySelectorAll(".modal"),overlay=document.getElementById("overlay");let isModalOpen=!1;function setSlide(e,t){const l=t.querySelector(".slider").querySelectorAll(".slide"),o=t.querySelectorAll(".dot");l.forEach(((t,l)=>{t.classList.toggle("active",l===e)})),o.forEach(((t,l)=>{t.classList.toggle("active",l===e)}))}if(modalTriggers.forEach((e=>{e.addEventListener("click",(function(e){e.stopPropagation();const t=this.getAttribute("data-modal"),l=document.getElementById(t);if(l.style.display="flex",overlay.style.display="block","modalG"===t){var o=document.getElementById("modalG-overlay");o&&(o.style.display="flex")}document.body.style.overflow="hidden",setSlide(0,l),l.dispatchEvent(new Event("modal:open")),isModalOpen=!0}))})),closeBtns.forEach((e=>{e.addEventListener("click",(function(e){e.stopPropagation();const t=this.closest(".modal");if(t.style.display="none",overlay.style.display="none",t&&"modalG"===t.id){var l=document.getElementById("modalG-overlay");l&&(l.style.display="none")}document.body.style.overflow="",isModalOpen=!1}))})),closeBtnsn.forEach((e=>{e.addEventListener("click",(function(e){e.stopPropagation();const t=this.closest(".modal");if(t.style.display="none",overlay.style.display="none",t&&"modalG"===t.id){var l=document.getElementById("modalG-overlay");l&&(l.style.display="none")}document.body.style.overflow="",isModalOpen=!1}))})),document.addEventListener("click",(function(e){if(isModalOpen){e.target.closest(".modal-content")||e.target.closest(".modal-trigger")||e.target.classList.contains("close-btn")||(modals.forEach((e=>{if("modalG"===e.id){var t=document.getElementById("modalG-overlay");t&&(t.style.display="none")}e.style.display="none"})),overlay.style.display="none",document.body.style.overflow="",isModalOpen=!1)}})),modalTriggers.forEach((e=>{e.addEventListener("click",(function(e){const t=this.getAttribute("data-modal");console.log("Trigger clicked for modal:",t),"modal2"===t&&console.log("Attempting to open modal2")}))})),modals.forEach((e=>{const t=e.querySelectorAll(".slide"),l=e.querySelector(".dots"),o=e.querySelector(".prev-btn"),n=e.querySelector(".next-btn");e.currentSlide=0,l.innerHTML="",t.forEach(((t,o)=>{const n=document.createElement("span");n.className="dot"+(0===o?" active":""),n.addEventListener("click",(t=>{t.stopPropagation(),e.currentSlide=o,s()})),l.appendChild(n)}));const d=l.querySelectorAll(".dot");function s(){t.forEach(((t,l)=>{t.classList.toggle("active",l===e.currentSlide)})),d.forEach(((t,l)=>{t.classList.toggle("active",l===e.currentSlide)})),o&&(o.style.display=t.length>1?"inline-block":"none"),n&&(n.style.display=t.length>1?"inline-block":"none")}o&&o.addEventListener("click",(l=>{l.stopPropagation(),0===e.currentSlide?e.currentSlide=t.length-1:e.currentSlide--,s()})),n&&n.addEventListener("click",(l=>{l.stopPropagation(),e.currentSlide===t.length-1?e.currentSlide=0:e.currentSlide++,s()})),e.addEventListener("modal:open",(()=>{e.currentSlide=0,s()})),s()})),document.querySelectorAll(".thank-btn").forEach((e=>{e.addEventListener("click",(function(t){if(t.preventDefault(),e.classList.contains("loading"))return;e.classList.add("loading"),e.disabled=!0;const l=e.innerHTML;e.innerHTML='<span class="spinner" style="display:inline-block;width:20px;height:20px;border:2px solid #ccc;border-top:2px solid #00BCD1;border-radius:50%;animation:spin 1s linear infinite;vertical-align:middle;"></span>';const o=[document.getElementById("email"),document.getElementById("email1"),document.getElementById("email2"),document.getElementById("email3"),document.getElementById("email4"),document.getElementById("email5")];let n="";for(const e of o)if(e&&null!==e.offsetParent&&e.value.trim().length>0){n=e.value.trim();break}if(!n)return console.log("No email found"),e.classList.remove("loading"),e.disabled=!1,void(e.innerHTML=l);const d={email:n};emailjs.send("service_m4c1dqb","template_1ayxyid",d).then((()=>{console.log("Successfully sent email");const e=this.closest(".modal");e&&(e.style.display="none",document.getElementById("modalG-overlay").style.display="none"),void 0!==overlay&&(overlay.style.display="none"),document.body.style.overflow="",isModalOpen=!1,document.getElementById("modalG").style.display="block",document.getElementById("modalG-overlay").style.display="flex"})).catch((e=>{console.error("Email sending failed:",e)})).finally((()=>{e.classList.remove("loading"),e.disabled=!1,e.innerHTML=l}))}))})),!document.getElementById("spinner-style")){const e=document.createElement("style");e.id="spinner-style",e.innerHTML="@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }",document.head.appendChild(e)}